@model IEnumerable<ClaimOrchestrator.Models.Claim>

@{
	ViewData["Title"] = "Claims Dashboard";
}

<div class="container-fluid">
	<div class="row">
		<div class="col-12">
			<div class="d-flex justify-content-between align-items-center mb-4">
				<h1 class="h3 mb-0 text-brown">Claims Dashboard</h1>
				<a asp-action="Upload" class="btn btn-primary">
					<i class="fas fa-upload me-2"></i>Upload Claims
				</a>
			</div>
			
			@if (TempData["Message"] != null)
			{
				<div class="alert alert-success alert-dismissible fade show" role="alert">
					@TempData["Message"]
					<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
				</div>
			}
			
			<div class="card shadow-sm">
				<div class="card-header bg-light">
					<h5 class="card-title mb-0 text-brown">All Claims</h5>
				</div>
				<div class="card-body p-0">
					<div class="table-responsive">
						<table class="table table-hover mb-0">
							<thead class="table-light">
								<tr>
									<th>Claim #</th>
									<th>Claimant</th>
									<th>Address</th>
									<th>Amount</th>
									<th>Status</th>
									<th>Created</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var claim in Model)
								{
									<tr>
										<td>
											<strong>@claim.ClaimNumber</strong>
										</td>
										<td>@claim.ClaimantName</td>
										<td>
											<small class="text-muted">@claim.Address</small>
										</td>
										<td>
											<span class="badge bg-success">$@claim.Amount.ToString("N2")</span>
										</td>
										<td>
											@{
												var statusClass = claim.Status switch
												{
													"Pending" => "bg-warning",
													"Validated" => "bg-info",
													"Deduplicated" => "bg-primary",
													"Eligible" => "bg-success",
													"Processed" => "bg-success",
													"Failed" => "bg-danger",
													_ => "bg-secondary"
												};
											}
											<span class="badge @statusClass">@claim.Status</span>
										</td>
										<td>
											<small class="text-muted">@claim.CreatedAt.ToString("MMM dd, yyyy")</small>
										</td>
										<td>
											<div class="btn-group btn-group-sm" role="group">
												<a asp-action="Details" asp-route-id="@claim.Id" class="btn btn-outline-primary">
													<i class="fas fa-eye"></i>
												</a>
												@if (claim.Status == "Pending")
												{
													<form asp-action="Process" asp-route-id="@claim.Id" method="post" style="display: inline;">
														@Html.AntiForgeryToken()
														<button type="submit" class="btn btn-outline-success" onclick="return confirm('Process this claim?')">
															<i class="fas fa-play"></i>
														</button>
													</form>
												}
											</div>
										</td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				</div>
			</div>
			
			@if (!Model.Any())
			{
				<div class="text-center py-5">
					<i class="fas fa-inbox fa-3x text-muted mb-3"></i>
					<h4 class="text-muted">No claims found</h4>
					<p class="text-muted">Upload some claims to get started.</p>
					<a asp-action="Upload" class="btn btn-primary">
						<i class="fas fa-upload me-2"></i>Upload Claims
					</a>
				</div>
			}
		</div>
	</div>
</div> 